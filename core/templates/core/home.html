<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>StudyTurtle - Home</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
        }
        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin-top: 2rem; /* 네비게이션 바와의 간격 추가 */
        }
        .content h1 {
            margin-bottom: 1.5rem; /* 제목과 리드 문구 사이 간격 */
        }
        .content p {
            margin-top: 0.2rem; /* 제목과의 간격 설정 */
        }
        .navbar-brand {
            font-size: 1.8rem;
        }
        .container {
            max-width: 1200px;
        }
        .section-spacing {
            margin-top: 5rem;
            margin-bottom: 5rem;
        }
        footer {
            background-color: #343a40;
            color: white;
            text-align: center;
            padding: 1rem;
        }
        .card {
            border: none;
            box-shadow: none;
            background-color: transparent;
            opacity: 0; /* 초기 상태: 보이지 않음 */
            transform: translateY(-50px); /* 위로 이동한 상태 */
            transition: opacity 0.5s ease, transform 0.5s ease; /* 부드러운 전환 */
        }
        .card.animate {
            opacity: 1; /* 나타남 */
            transform: translateY(0); /* 제자리로 이동 */
        }
    </style>
    
</head>
<body>
    <!-- 네비게이션 바 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">StudyTurtle</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    {% if user.is_authenticated %}
                        <li class="nav-item">
                            {% if user.role == 'admin' %}
                                <a class="nav-link" href="{% url 'core:admin_dashboard' %}">관리자 대시보드</a>
                            {% elif user.role == 'teacher' %}
                                <a class="nav-link" href="{% url 'core:dashboard' %}">선생님 대시보드</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'core:student_dashboard' %}">학생 대시보드</a>
                            {% endif %}
                        </li>
                        <li class="nav-item">
                            <form method="post" action="{% url 'core:logout' %}" style="display: inline;">
                                {% csrf_token %}
                                <a href="#" onclick="this.closest('form').submit();" class="nav-link">로그아웃</a>
                            </form>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'core:login' %}">로그인</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'core:register' %}">회원가입</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- 메인 콘텐츠 -->
    <div class="content">
        <div class="container section-spacing">
            <h1 class="display-4">StudyTurtle에 오신걸 환영합니다!</h1>
            <p class="lead">스터디의 학습 진도를 도와줄 최고의 선택</p>
            <img src="static/studyturtle_logo.png" alt="StudyTurtle Logo" class="logo">
        </div>
    </div>

    <!-- 소개 섹션 -->
    <div class="container-fluid section-spacing">
        <div class="row justify-content-center">
            <div class="col-md-3 text-center card">
                <h3>Track Progress</h3>
                <p>선생님은 학생의 학습 과제를 관리하고<br>진행 상황을 모니터링하세요</p>
            </div>
            <div class="col-md-3 text-center card">
                <h3>Collaborate & Feedback</h3>
                <p>선생님과 학생 간의 소통을 통해서<br>학습을 효율적으로 개선하세요</p>
            </div>
            <div class="col-md-3 text-center card">
                <h3>Achieve Study Goals</h3>
                <p>스터디 목표를 설정하고 이를<br>달성할 수 있도록 지원합니다</p>
            </div>
        </div>
    </div>

    <!-- 공지사항 섹션 -->
    <div class="container-fluid section-spacing">
        <h2 class="text-center">공지사항</h2>
        <div class="row justify-content-center">
            {% if announcements %}
                {% for announcement in announcements %}
                    <div class="col-md-8">
                        <div class="alert alert-info" role="alert">
                            <strong>{{ announcement.title }}</strong>
                            <p>{{ announcement.content }}</p>
                            <small>{{ announcement.created_at|date:"Y년 m월 d일 H:i" }}</small>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p class="text-center">현재 공지사항이 없습니다.</p>
            {% endif %}
        </div>
    </div>

    <!-- 푸터 -->
    <footer>
        <p>&copy; 2024 StudyTurtle. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cards = document.querySelectorAll('.card');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate');
                        observer.unobserve(entry.target); // 한 번만 애니메이션 적용
                    }
                });
            }, { threshold: 0.2 });

            cards.forEach(card => observer.observe(card));
        });
    </script>
</body>
</html>
